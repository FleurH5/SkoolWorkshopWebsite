<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aanmelden</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.9.1/font/bootstrap-icons.min.css"> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="assignmentDetails.css">
</head>
<body>
    <p id="confirm">Aangemeld?</p>
    <button onclick="confirmation()">Aanmelden</button>

    <script>
        function confirmation() {
            let result = confirm("Klik op OK om je aan te melden");
            if(result === true) {
                document.getElementById("confirm").textContent = "User clicked OK";
                console.log("User clicked OK");
                isConfirmed();
            } else {
                document.getElementById("confirm").textContent = "User clicked Cancel";
                console.log("User clicked Cancel");
            }
        }

        //set the status and id's
        function isConfirmed() {
const data = {
    commissionWorkshopId: '999',    // testdata
    userId: '999',                  // testdata
    signup: 'Afwachtend'            // standaard dit bij aanmelding
};

fetch('/add', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
})
.then(response => response.json())
.then(data => {
    console.log('Success:', data);
    document.getElementById("confirm").textContent = "Aanmelding succesvol verstuurd";
})
.catch((error) => {
    console.error('Error:', error);
    document.getElementById('confirm').textContent = "Er is een fout opgetreden";
});
        }
    </script>
    
</body>
</html>